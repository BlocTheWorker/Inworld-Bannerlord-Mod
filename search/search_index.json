{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Inworld Mod","text":"<p>Welcome to Mount&amp;Blade II: Bannerlord's Inworld - Calradia mod page. In this page, you can find information about how to download the mod and how to install it.</p> <p>As well as, for curious developers, I left the source code as well.</p>"},{"location":"#download","title":"Download","text":"<p>Currently mod is only available in nexusmods</p>"},{"location":"#download-the-mod-from-here","title":"Download the mod from here","text":"<p>Beware</p> <p>Please always respect to source and download mods from source to minimize any malware on your side.</p>"},{"location":"#about","title":"About","text":"<p>Ever wanted to talk with villagers, commoners, lords, and ladies in the realm, listen to their dreams, ideas, plans? Get ready to embark on an epic adventure like no other! Inworld Calradia mod takes the Bannerlord experience to the next level by allowing you to engage with a diverse range of characters within the realm. From humble villagers to powerful lords and ladies, you can now immerse yourself in their hopes, dreams, and plans, using the latest technology.</p> <p>With the powerful GPT AI and Text-to-speech features from Inworld AI, you'll feel like you're really there, speaking with characters that are unique and authentic to the game. Each noble in Calradia has been created with a range of different backgrounds and traits, ensuring that every conversation you have will be truly one-of-a-kind. Through your expert conversational skills, you'll unlock secrets and learn about hidden ambitions and plots. And with the ability to chat with villagers and townsfolk, you can gain valuable insights into the daily lives of the people in Calradia.</p> <p>Every noble in the Calradia will be generated based on their in game characters but with variety of possible background combinations, this allows you to understand their characteristics, but as well as makes your each gameplay unique. These characters persist throughout your save game. You will be able to chat with them, hear their voice, almost instantly the moment you enter your input. You will be able to learn way more than you can imagine, uncover hidden ambitions and plots just by your talking skills. You can also talk with villagers in village, townsfolk in towns and taverns to gather information or just to immerse yourself with a small chit chat with the people, to understand how they are feeling.</p> <p>So don't wait any longer - dive into the immersive world of Inworld Calradia mod and discover a whole new level of excitement in Bannerlord!</p>"},{"location":"#how-does-it-work","title":"How does it work?","text":"<p>Under the hood, it works with communicating with Inworld servers. Inworld provides SDK to communicate and talk with characters already but it's not providing any tools to generate characters programmatically and update them. And this is exactly what we want for Sandbox experience. So this mod is coming as two parts, one executable file and one mod system. Executable file is communicating with Inworld's servers and your account (see Installation guide)</p> <p>Aside from handling the conversation and in-game logic, mod also responsible with checking the characters in the scene and generating them if they don't exist. It is achieving this with using a Story Engine that uses a large corpus of text to generate character on top of the already vast information Inworld's GPT has. Mod generates character by respecting their role and attributes in the Calradia, meaning that a regular clan member will be different from a clan ruler or faction ruler or if a person is a battle-like person etc, you get different characters generated. Characters get a lot of information and gets generated in this way. Also, voices are getting assigned in this generation phase as well. There are certain dynamic information I'm passing the characters when you go into scene. </p> <p>For nobles, generation happens only once, and only when you first enter a scene with them (castle or town keep) and you shouldn't take any actions until you see this text otherwise you cannot communicate with them</p> <p>Once you see this, it means characters are ready to go.</p> <p>For townfolk/villagers, system is a little different, unlike nobles, you cannot talk with same townfolk with same personality twice in this version. This is, unfortunately a limitation I had to put to avoid thousands of villager generation and causing  a mess in your account and in Inworld's account. That being said, they are way much faster to talk with. Meaning that you can go to any town and start talking with any one in there in seconds. Moment you start the regular chat, it takes ~4 seconds to create character for this peasant/common folk. And from that moment on you can continue talk with them. Unlike nobles, these people have jobs and they are mostly in hurry. They also have more variant on their personality, meaning that some villagers can talk very blunt while some talk bluntly or some talk formally. These are small nuances that you can pick up during your conversation. </p>"},{"location":"#how-to-have-conversation","title":"How to have conversation?","text":"<p>This mod doesn't remove Bannerlord's default conversation settings in favor of gameplay, instead, I allow user to engage in textual discussion directly upon their request. Just say \"I need to talk with you\" and you will see the textbox. Existing this view is easy. You can simply press TAB button to exit the textual conversation style once you are finished.</p>"},{"location":"#what-do-characters-know","title":"What do characters know?","text":"<p>They know practically anything they should know. For nobles, they know, who are they, how old are they, who is their father, mother, brothers, sisters, children if they have any. Furthermore, they know which clan they are in, what other clans exist in their faction, different war/peace states with other factions. They know rulers of factions, cultures in Calradia, tales in calradia and such. They also know their past with you, such as, if your companion/clan member is killed by them in battle, they will remember this , or if you killed any of their family members, they will remind you that. They also remember past battles they had with you, and they might refer to this. Aside from that, they know past battles happened in Calradia. They also know overall geography of Calradia. The town they are currently located at. They know the ruler of that town. They have unique ambitions or plans or interests. They know rumors about other clans which they might or might not tell to you. They also have unique background stories generated for them that makes each gameplay with different generation is unique. For common people, it's almost similar to nobles but of course they don't have any knowledge on family and clans. Rest of the things are identical with nobles. All characters \"see\" what you are wearing and what they are wearing. They also know where they are right now (ie. if they are in tavern, they know that they are in tavern) They also know parties nearby (if there are any)</p>"},{"location":"#important-read-this-before-use","title":"Important - Read this before use","text":"<ul> <li>This mod is using Inworld's existing endpoints and SDK's. This means you NEED an Inworld account. Follow the guide on how to install the mod and setup your environment.</li> <li>Mod only works for English language. Even though, AI sometimes answers in different language when you ask question in that language or ask it to reply in that language (such as Polish, Turkish etc) this isn't normal behavior. Usually you will get answer like \"I don't speak your language\" and this is expected. Inworld is working hard to bring new languages to their system and once they do this, you should be able to chat in your langauge. (TTS works very poorly in other languages)  Inworld is applying User Guidelines to your messages. This means, you can get banned if you things that are violating that. You won't get banned straight away, but you might, keep your conversations in human-level please. Unlike Chatgpt, AI might still respond to you in this instance, however your account can get into trouble.  </li> <li>Inworld is constantly improving and updating their systems. This is great, but also means that you can see some behaviors that is not great for your taste. If you encounter weird behavior, don't report it to me - instead please go to Inworld's Discord channel\ufeff and describe your behavior. </li> <li>This mod gives no guarantee to work with other mods and it's not aiming to work with other mods either. This especially includes mods like external Harmony and other stuff. This mod does NOT require any extra mods to run. It should work just fine for any mod that is not total conversion mod. But no guarantee. If you face issues with it, just post it to posts section, don't open bug report. </li> <li>Mod can stop working due to several reasons such as Inworld changing the backend or Taleworlds making an update. While I will try my best to keep up with these, I cannot provide any guarantee. </li> <li>Even though currently system for memory is in place within the mod, it's not ready on Inworld's side. Meaning that, you are unable to continue conversation after returning it to other day. All the information you give to AI in previous session will be lost. Inworld will bring memory option internally soon, so you won't have this issue in the future.</li> </ul>"},{"location":"#background-application","title":"Background Application","text":"<p>You will notice that once you launch the game with the mod, it will launch another executable similar to this It might be scary, but don't worry, this is perfectly normal as stated in there. Once you close the game, you can manually close this one too.</p>"},{"location":"#helper-cheats","title":"Helper Cheats","text":"<p>Mod designed to use your Inworld workspace and can be used one-save game only. If you want to refresh everything or just delete everything, press ALT+~ key and it will open the console. Type inworld. and you will see the options. Select one of them and wait 1-2 seconds.</p>"},{"location":"#reporting-bugs","title":"Reporting Bugs","text":"<p>Don't report bugs to here but rather use Nexusmods' bug section. Also carefully read the bug reporting guidelines if you want to get resolution.</p>"},{"location":"#installation-and-setup","title":"Installation and Setup","text":"<p>Please visit installation page for extensive information about how to instal and setup the mod</p>"},{"location":"installation/","title":"Installation","text":"<p>In this section we will talk about installation and setup. It's extremely simple and can be done in 3 steps.</p> <p>Tip</p> <p>It's highly advised to learn how to install a mod for Bannerlord before starting to read this step-by-step guide</p>"},{"location":"installation/#step-0-install-mod","title":"Step 0: Install Mod","text":"<p>Assuming that you already downloaded the mod (you downloaded the mod, right?\ud83d\ude04) you should install the mod like any other Bannerlord mod. If you don't know how to, here is a quick step-by-step information</p> <ul> <li>Download the mod from nexus.</li> <li>Extract mod .zip/.rar file to a folder (Use Winrar, WinZip, 7Zip, up to you)</li> <li>Once you extract it, folder called <code>Inworld</code> should be like this:</li> </ul> <p></p> <ul> <li>Great. Now go to your game's installation path. It should be similar to <code>Steam\\steamapps\\common\\Mount &amp; Blade II Bannerlord</code> but if you are unable to find it and if you are using Steam, open Steam, right click to game, <code>Properties -&gt; Local Files -&gt; Browse</code> and it will open the location.</li> </ul> <p></p> <ul> <li>Now copy that <code>Inworld</code> folder to <code>Steam\\steamapps\\common\\Mount &amp; Blade II Bannerlord\\Modules\\</code></li> <li>Congrats. It's installed \ud83d\ude80\ufe0f</li> </ul> <p>Small note</p> <p>If you are getting \"Cannot Load\" error, unblock your .dll files or simply use Novus Launcher.</p>"},{"location":"installation/#step-1-create-inworld-account","title":"Step 1: Create Inworld Account","text":"<p>Mod is using Inworld's great AI and TTS system. This means you need one too. But don't worry, it's quite easy to setup an account. It's also very new-user friendly.</p> <p>Go to  inworld.com And you should be seeing something like this:</p> <p></p> <p>Great now click <code>START CREATING</code> and it should redirect you to a page similar to this:</p> <p></p> <p>Now click to Sign-up with email and complete your signup process. Note that I said <code>Sign up with email</code> - don't select the other options because they won't work.</p> <p>Beware!</p> <p>This part is important. You should select Sign-up with email not the other options!</p>"},{"location":"installation/#step-2-setting-up-workspace","title":"Step 2: Setting up Workspace","text":"<p>Congrats. You are signed up for Inworld! If you are new user, inworld will redirect you to a shared workspace. Something like this (with different name and more characters)</p> <p></p> <p>Now we don't want this workspace, so you should create a new one. For this, Click the <code>Change</code> on the left side. This will open a page similar to this</p> <p></p> <p>You will probably see only a single workspace in here. So we need to create a new one. Click to <code>Create new workspace</code> button and it will redirect you to a page similar to this. Add your workspace name and click <code>Save</code> but make sure that you copy your Workspace id to somewhere, we will need that.</p> <p></p> <p>When you click to Save it will show a page like this. Congrats! You just created your workspace \ud83d\ude80\ufe0f</p> <p></p>"},{"location":"installation/#step-3-connecting-mod-to-inworld-system","title":"Step 3: Connecting Mod to Inworld System","text":"<p>So now you have a mod, you have Inworld account and Inworld Workspace. But they don't know each other. So we need to setup one last thing before we jump into exploring Calradia.</p> <p>Open your workspace (should be like picture above) and click <code>Integrations</code> because this is your first time you won't see anything in this page but it should be similar to this. What you need to do in here is clicking big <code>Generate new key</code> button. And this will generate a secret as shown in the image (Dont tell your secret to anyone, it's secret)</p> <p></p> <p>Now keep this page open for awhile, we will need that. Go to your mod installation path (<code>Steam\\steamapps\\common\\Mount &amp; Blade II Bannerlord\\Modules\\Inworld</code>) in here you should be seeing a <code>ModRelayer</code> folder. Go inside that folder. Inside this folder there should be two things, one of them is a <code>.env</code> file and other one is <code>InworldClient.exe</code>. We only care about <code>.env</code> file for now. Open this file with your text editor (I used notepad, but you can open it with anything you want) It should be similar to this</p> <p></p> <p>Now, you need to replace these values.</p> <p><code>LOGIN_EMAIL</code> is the email you used to sign up for Inworld. Don't forget the put it between <code>\"</code></p> <p><code>LOGIN_PASSWORD</code> is the password you used to sign in for Inworld (Now you see why I asked sign-up with email option \ud83d\ude04)</p> <p><code>INWORLD_KEY</code> this is the <code>Key</code> value in the Integrations page we left open a moment ago. Go there, click to copy-icon to copy that instantly, and replace in here. Again, don't forget to put it in between <code>\"</code></p> <p><code>INWORLD_SECRET</code> is the same as above but use <code>Secret</code> value.</p> <p><code>INWORLD_WORKSPACE</code> is the workspace id of your workspace. If you didn't listen me and didn't take note during creation, check your URL in your browser. It should be similar to this <code>https://studio.inworld.ai/workspaces/workspaceid22/integrations</code> in this case the text between <code>workspaces/</code> and <code>/integrations</code> is your workspace id. Use that one.</p> <p><code>DISABLE_VOICE</code> is optional setting if you want to disable Text-to-speech in the mod.</p> <p>Beware!</p> <p>Use <code>\"</code>. Meaning that it should look like <code>\"yourvalue\"</code> only <code>DISABLE_VOICE</code> part is exception.</p> <p>After all the change, save the file. And you are all clear!</p>"},{"location":"source/","title":"Source Code Explanation","text":"<p>If you are asking <code>Why the hell am I reading this?</code> to yourself, it means this section isn't for you. Please check installation or index page.</p>"},{"location":"source/#understanding-the-different-parts","title":"Understanding the Different Parts","text":"<p>As you might guess, using Inworld directly in Bannerlord is not possible due to certain reasons. Currently mod works with application that gets ran</p>"},{"location":"source/#bannerlord-mod-code","title":"Bannerlord Mod Code","text":"<p>Bannerlord mod code is written in C# and only works for Bannerlord. This part is not important if you are not into repacking your own mod for this game. It also contains some <code>bad practices</code> as well - because I had to move fast. So if you are new C# learner and/or seasoned dotnet wiz, don't bother checking this code because it might confuse or frusturate you \ud83d\ude04</p>"},{"location":"source/#nodejs-relayer","title":"NodeJs Relayer","text":"<p>Nodejs relayer part is written in nodejs to have compatitiblity with Inworld Nodejs SDK. However, this version is slightly extended version. Currently SDK doesn't support generic character generations and/or run-time updates or deletion. With this relayer system I'm extending the capabilities of the Inworld Nodejs SDK. Yet, core communication/interaction logic is still relying on SDK.</p>"},{"location":"source/#how","title":"How?","text":"<p>I'm simply using the same functions as portal. What I'm doing is, I'm logging in to firebase as our user. This part isn't even directly related to Inworld, since it's using googleapis. This call gives you login idtoken and refresh token. From there we are securing token (again from googleapis) to get actual access_token and refresh_token. I'm doing basic token caching based on it's TTL, and I'm not re-logging with password/email combination. And rest is just mimicking what portal is doing.</p>"},{"location":"source/#how-to-run","title":"How to run?","text":"<ul> <li>Bannerlord: You can use sln for building for Bannerlord, well, if you have Bannerlord installed, of course.</li> <li>Nodejs: You need install required things such as node, and then it's same as any other node app. <code>npm i</code> and <code>node Client</code> starts the server locally.</li> </ul>"}]}